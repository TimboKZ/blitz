"use strict";
var mock = require('mock-fs');
var fse = require('fs-extra');
var path = require('path');
var chai_1 = require('chai');
var GenericFile_1 = require('../../../src/files/GenericFile');
describe('GenericFile', function () {
    describe('#getFullPath()', function () {
        it('combines paths correctly', function () {
            chai_1.assert.equal(new GenericFile_1.GenericFile('first', ['second', 'third'], 'fourth.txt').getFullPath(), path.join('first', 'second', 'third', 'fourth.txt'));
        });
    });
    describe('#read()', function () {
        it('reads file contents correctly', function () {
            var fileContents = 'Hello world!';
            var mockConfig = {
                'test.txt': mock.file({
                    content: fileContents,
                    mode: 777,
                }),
            };
            mock(mockConfig);
            var file = new GenericFile_1.GenericFile('', [], 'test.txt');
            file.read();
            chai_1.assert.equal(file.getContents(), fileContents);
            mock.restore();
        });
    });
    describe('#write()', function () {
        it('writes file contents correctly', function () {
            var fileContents = 'Hello world!';
            var mockConfig = {
                'test.txt': mock.file({
                    content: '',
                    mode: 777,
                }),
            };
            mock(mockConfig);
            var file = new GenericFile_1.GenericFile('/', [], 'test.txt');
            file.setContents(fileContents);
            file.write();
            chai_1.assert.equal(fse.readFileSync('/test.txt', 'utf8'), fileContents);
            mock.restore();
        });
    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3Rlc3QvdW5pdC9maWxlcy9HZW5lcmljRGlyZWN0b3J5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFRQSxJQUFZLElBQUksV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUNoQyxJQUFZLEdBQUcsV0FBTSxVQUFVLENBQUMsQ0FBQTtBQUNoQyxJQUFZLElBQUksV0FBTSxNQUFNLENBQUMsQ0FBQTtBQUM3QixxQkFBcUIsTUFBTSxDQUFDLENBQUE7QUFDNUIsNEJBQTBCLGdDQUFnQyxDQUFDLENBQUE7QUFFM0QsUUFBUSxDQUFDLGFBQWEsRUFBRTtJQUNwQixRQUFRLENBQUMsZ0JBQWdCLEVBQUU7UUFDdkIsRUFBRSxDQUFDLDBCQUEwQixFQUFFO1lBQzNCLGFBQU0sQ0FBQyxLQUFLLENBQ1IsSUFBSSx5QkFBVyxDQUFDLE9BQU8sRUFBRSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsRUFBRSxZQUFZLENBQUMsQ0FBQyxXQUFXLEVBQUUsRUFDekUsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxZQUFZLENBQUMsQ0FDdEQsQ0FBQztRQUNOLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFDSCxRQUFRLENBQUMsU0FBUyxFQUFFO1FBQ2hCLEVBQUUsQ0FBQywrQkFBK0IsRUFBRTtZQUNoQyxJQUFJLFlBQVksR0FBRyxjQUFjLENBQUM7WUFDbEMsSUFBSSxVQUFVLEdBQUc7Z0JBQ2IsVUFBVSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUM7b0JBQ2xCLE9BQU8sRUFBRSxZQUFZO29CQUNyQixJQUFJLEVBQUUsR0FBRztpQkFDWixDQUFDO2FBQ0wsQ0FBQztZQUNGLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNqQixJQUFJLElBQUksR0FBRyxJQUFJLHlCQUFXLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUMvQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDWixhQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBRSxZQUFZLENBQUMsQ0FBQztZQUMvQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDbkIsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUNILFFBQVEsQ0FBQyxVQUFVLEVBQUU7UUFDakIsRUFBRSxDQUFDLGdDQUFnQyxFQUFFO1lBQ2pDLElBQUksWUFBWSxHQUFHLGNBQWMsQ0FBQztZQUNsQyxJQUFJLFVBQVUsR0FBRztnQkFDYixVQUFVLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQztvQkFDbEIsT0FBTyxFQUFFLEVBQUU7b0JBQ1gsSUFBSSxFQUFFLEdBQUc7aUJBQ1osQ0FBQzthQUNMLENBQUM7WUFDRixJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDakIsSUFBSSxJQUFJLEdBQUcsSUFBSSx5QkFBVyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDaEQsSUFBSSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUMvQixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDYixhQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxFQUFFLFlBQVksQ0FBQyxDQUFDO1lBQ2xFLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNuQixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJmaWxlIjoidGVzdC91bml0L2ZpbGVzL0dlbmVyaWNEaXJlY3RvcnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlIEdlbmVyaWNGaWxlIHRlc3RzXG4gKiBAYXV0aG9yIFRpbXVyIEt1emhhZ2FsaXlldiA8dGltLmt1emhAZ21haWwuY29tPlxuICogQGNvcHlyaWdodCAyMDE2XG4gKiBAbGljZW5zZSBHUEwtMy4wXG4gKiBAc2luY2UgMC4yLjBcbiAqL1xuXG5pbXBvcnQgKiBhcyBtb2NrIGZyb20gJ21vY2stZnMnO1xuaW1wb3J0ICogYXMgZnNlIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnY2hhaSc7XG5pbXBvcnQge0dlbmVyaWNGaWxlfSBmcm9tICcuLi8uLi8uLi9zcmMvZmlsZXMvR2VuZXJpY0ZpbGUnO1xuXG5kZXNjcmliZSgnR2VuZXJpY0ZpbGUnLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJyNnZXRGdWxsUGF0aCgpJywgKCkgPT4ge1xuICAgICAgICBpdCgnY29tYmluZXMgcGF0aHMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKFxuICAgICAgICAgICAgICAgIG5ldyBHZW5lcmljRmlsZSgnZmlyc3QnLCBbJ3NlY29uZCcsICd0aGlyZCddLCAnZm91cnRoLnR4dCcpLmdldEZ1bGxQYXRoKCksXG4gICAgICAgICAgICAgICAgcGF0aC5qb2luKCdmaXJzdCcsICdzZWNvbmQnLCAndGhpcmQnLCAnZm91cnRoLnR4dCcpXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBkZXNjcmliZSgnI3JlYWQoKScsICgpID0+IHtcbiAgICAgICAgaXQoJ3JlYWRzIGZpbGUgY29udGVudHMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGZpbGVDb250ZW50cyA9ICdIZWxsbyB3b3JsZCEnO1xuICAgICAgICAgICAgbGV0IG1vY2tDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgJ3Rlc3QudHh0JzogbW9jay5maWxlKHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogZmlsZUNvbnRlbnRzLFxuICAgICAgICAgICAgICAgICAgICBtb2RlOiA3NzcsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbW9jayhtb2NrQ29uZmlnKTtcbiAgICAgICAgICAgIGxldCBmaWxlID0gbmV3IEdlbmVyaWNGaWxlKCcnLCBbXSwgJ3Rlc3QudHh0Jyk7XG4gICAgICAgICAgICBmaWxlLnJlYWQoKTtcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChmaWxlLmdldENvbnRlbnRzKCksIGZpbGVDb250ZW50cyk7XG4gICAgICAgICAgICBtb2NrLnJlc3RvcmUoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgZGVzY3JpYmUoJyN3cml0ZSgpJywgKCkgPT4ge1xuICAgICAgICBpdCgnd3JpdGVzIGZpbGUgY29udGVudHMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGZpbGVDb250ZW50cyA9ICdIZWxsbyB3b3JsZCEnO1xuICAgICAgICAgICAgbGV0IG1vY2tDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgJ3Rlc3QudHh0JzogbW9jay5maWxlKHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJycsXG4gICAgICAgICAgICAgICAgICAgIG1vZGU6IDc3NyxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBtb2NrKG1vY2tDb25maWcpO1xuICAgICAgICAgICAgbGV0IGZpbGUgPSBuZXcgR2VuZXJpY0ZpbGUoJy8nLCBbXSwgJ3Rlc3QudHh0Jyk7XG4gICAgICAgICAgICBmaWxlLnNldENvbnRlbnRzKGZpbGVDb250ZW50cyk7XG4gICAgICAgICAgICBmaWxlLndyaXRlKCk7XG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwoZnNlLnJlYWRGaWxlU3luYygnL3Rlc3QudHh0JywgJ3V0ZjgnKSwgZmlsZUNvbnRlbnRzKTtcbiAgICAgICAgICAgIG1vY2sucmVzdG9yZSgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl19
