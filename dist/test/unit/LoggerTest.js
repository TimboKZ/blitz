"use strict";
var colors = require('colors');
var chai_1 = require('chai');
var Logger_1 = require('../../src/Logger');
describe('Logger', function () {
    describe('#brand()', function () {
        it('colours a string', function () {
            var plainString = 'hello world';
            var colouredString = Logger_1.Logger.brand(plainString);
            if (colors.enabled) {
                chai_1.assert.notEqual(colouredString, plainString);
            }
            chai_1.assert.equal(colors.strip(colouredString), plainString);
        });
    });
    describe('#logWithPrefix()', function () {
        var consoleLog = console.log;
        var output = '';
        beforeEach(function (done) {
            console.log = function (message) {
                output = message;
            };
            done();
        });
        afterEach(function (done) {
            console.log = consoleLog;
            done();
        });
        it('adds a prefix to a string', function () {
            Logger_1.Logger.logWithPrefix('hello', 'world');
            chai_1.assert.equal(output, 'hello world');
            chai_1.assert.equal(Logger_1.Logger.logWithPrefix('hello', 'world', false), 'hello world');
        });
    });
    describe('#log()', function () {
        var consoleLog = console.log;
        var output = '';
        beforeEach(function (done) {
            output = '';
            console.log = function (message) {
                output = message;
            };
            done();
        });
        afterEach(function (done) {
            console.log = consoleLog;
            done();
        });
        it('only prints Log and Warn levels if verbose option is on', function () {
            global.verbose = false;
            Logger_1.Logger.log('Hello World', Logger_1.LogLevel.Log);
            chai_1.assert.equal(output, '');
            Logger_1.Logger.log('Hello World', Logger_1.LogLevel.Warn);
            chai_1.assert.equal(output, '');
            global.verbose = true;
            Logger_1.Logger.log('Hello', Logger_1.LogLevel.Log);
            chai_1.assert.notEqual(output, '');
            output = '';
            Logger_1.Logger.log('World', Logger_1.LogLevel.Warn);
            chai_1.assert.notEqual(output, '');
        });
        it('only prints Debug level if debug option is on', function () {
            global.debug = false;
            Logger_1.Logger.log('Hello World', Logger_1.LogLevel.Debug);
            chai_1.assert.equal(output, '');
            global.debug = true;
            Logger_1.Logger.log('Hello', Logger_1.LogLevel.Debug);
            chai_1.assert.notEqual(output, '');
        });
        it('always prints errors', function () {
            global.debug = false;
            global.verbose = false;
            Logger_1.Logger.log('Hello World', Logger_1.LogLevel.Error);
            chai_1.assert.notEqual(output, '');
        });
        it('indents the string after the newline character', function () {
            global.debug = false;
            global.verbose = true;
            Logger_1.Logger.log('Hello\nWorld');
            chai_1.assert.isTrue(/\n(\s)+/g.test(output));
        });
    });
    describe('#logMany()', function () {
        it('logs an array', function () {
            var consoleLog = console.log;
            var output = [];
            console.log = function (message) {
                output.push(message);
            };
            Logger_1.Logger.logMany(['1', '2', '3']);
            chai_1.assert.equal(output.length, 3);
            console.log = consoleLog;
        });
    });
    describe('#split()', function () {
        it('trims newline characters', function () {
            var testString = '\n\n\nHello\n\n\n';
            chai_1.assert.deepEqual(Logger_1.Logger.split(testString), ['Hello']);
        });
        it('breaks string into an array correctly', function () {
            var testString = '\n\n\nHello\nWorld\n\n\n';
            chai_1.assert.deepEqual(Logger_1.Logger.split(testString), ['Hello', 'World']);
        });
    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3Rlc3QvdW5pdC9Mb2dnZXJUZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFRQSxJQUFZLE1BQU0sV0FBTSxRQUFRLENBQUMsQ0FBQTtBQUNqQyxxQkFBcUIsTUFBTSxDQUFDLENBQUE7QUFDNUIsdUJBQStCLGtCQUFrQixDQUFDLENBQUE7QUFFbEQsUUFBUSxDQUFDLFFBQVEsRUFBRTtJQUNmLFFBQVEsQ0FBQyxVQUFVLEVBQUU7UUFDakIsRUFBRSxDQUFDLGtCQUFrQixFQUFFO1lBQ25CLElBQUksV0FBVyxHQUFHLGFBQWEsQ0FBQztZQUNoQyxJQUFJLGNBQWMsR0FBRyxlQUFNLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQy9DLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUNqQixhQUFNLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxXQUFXLENBQUMsQ0FBQztZQUNqRCxDQUFDO1lBQ0QsYUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQzVELENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFDSCxRQUFRLENBQUMsa0JBQWtCLEVBQUU7UUFDekIsSUFBSSxVQUFVLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQztRQUM3QixJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDaEIsVUFBVSxDQUFDLFVBQUMsSUFBSTtZQUNaLE9BQU8sQ0FBQyxHQUFHLEdBQUcsVUFBQyxPQUFnQjtnQkFDM0IsTUFBTSxHQUFHLE9BQU8sQ0FBQztZQUNyQixDQUFDLENBQUM7WUFDRixJQUFJLEVBQUUsQ0FBQztRQUNYLENBQUMsQ0FBQyxDQUFDO1FBQ0gsU0FBUyxDQUFDLFVBQUMsSUFBSTtZQUNYLE9BQU8sQ0FBQyxHQUFHLEdBQUcsVUFBVSxDQUFDO1lBQ3pCLElBQUksRUFBRSxDQUFDO1FBQ1gsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsMkJBQTJCLEVBQUU7WUFDNUIsZUFBTSxDQUFDLGFBQWEsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDdkMsYUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsYUFBYSxDQUFDLENBQUM7WUFDcEMsYUFBTSxDQUFDLEtBQUssQ0FBQyxlQUFNLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFDL0UsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztJQUNILFFBQVEsQ0FBQyxRQUFRLEVBQUU7UUFDZixJQUFJLFVBQVUsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDO1FBQzdCLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNoQixVQUFVLENBQUMsVUFBQyxJQUFJO1lBQ1osTUFBTSxHQUFHLEVBQUUsQ0FBQztZQUNaLE9BQU8sQ0FBQyxHQUFHLEdBQUcsVUFBQyxPQUFnQjtnQkFDM0IsTUFBTSxHQUFHLE9BQU8sQ0FBQztZQUNyQixDQUFDLENBQUM7WUFDRixJQUFJLEVBQUUsQ0FBQztRQUNYLENBQUMsQ0FBQyxDQUFDO1FBQ0gsU0FBUyxDQUFDLFVBQUMsSUFBSTtZQUNYLE9BQU8sQ0FBQyxHQUFHLEdBQUcsVUFBVSxDQUFDO1lBQ3pCLElBQUksRUFBRSxDQUFDO1FBQ1gsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMseURBQXlELEVBQUU7WUFDMUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7WUFDdkIsZUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsaUJBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN4QyxhQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQztZQUN6QixlQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxpQkFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3pDLGFBQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQ3pCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1lBQ3RCLGVBQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLGlCQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDbEMsYUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDNUIsTUFBTSxHQUFHLEVBQUUsQ0FBQztZQUNaLGVBQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLGlCQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbkMsYUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDaEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsK0NBQStDLEVBQUU7WUFDaEQsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7WUFDckIsZUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsaUJBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMxQyxhQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQztZQUN6QixNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztZQUNwQixlQUFNLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxpQkFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3BDLGFBQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ2hDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHNCQUFzQixFQUFFO1lBQ3ZCLE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBQ3JCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1lBQ3ZCLGVBQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLGlCQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDMUMsYUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDaEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsZ0RBQWdELEVBQUU7WUFDakQsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7WUFDckIsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7WUFDdEIsZUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUMzQixhQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUMzQyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBQ0gsUUFBUSxDQUFDLFlBQVksRUFBRTtRQUNuQixFQUFFLENBQUMsZUFBZSxFQUFFO1lBQ2hCLElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7WUFDN0IsSUFBSSxNQUFNLEdBQUcsRUFBRSxDQUFDO1lBQ2hCLE9BQU8sQ0FBQyxHQUFHLEdBQUcsVUFBQyxPQUFnQjtnQkFDM0IsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN6QixDQUFDLENBQUM7WUFDRixlQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ2hDLGFBQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMvQixPQUFPLENBQUMsR0FBRyxHQUFHLFVBQVUsQ0FBQztRQUM3QixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBQ0gsUUFBUSxDQUFDLFVBQVUsRUFBRTtRQUNqQixFQUFFLENBQUMsMEJBQTBCLEVBQUU7WUFDM0IsSUFBSSxVQUFVLEdBQUcsbUJBQW1CLENBQUM7WUFDckMsYUFBTSxDQUFDLFNBQVMsQ0FBQyxlQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUMxRCxDQUFDLENBQUMsQ0FBQztRQUNILEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRTtZQUN4QyxJQUFJLFVBQVUsR0FBRywwQkFBMEIsQ0FBQztZQUM1QyxhQUFNLENBQUMsU0FBUyxDQUFDLGVBQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNuRSxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJmaWxlIjoidGVzdC91bml0L0xvZ2dlclRlc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlIExvZ2dlciB0ZXN0c1xuICogQGF1dGhvciBUaW11ciBLdXpoYWdhbGl5ZXYgPHRpbS5rdXpoQGdtYWlsLmNvbT5cbiAqIEBjb3B5cmlnaHQgMjAxNlxuICogQGxpY2Vuc2UgR1BMLTMuMFxuICogQHNpbmNlIDAuMi4wXG4gKi9cblxuaW1wb3J0ICogYXMgY29sb3JzIGZyb20gJ2NvbG9ycyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnY2hhaSc7XG5pbXBvcnQge0xvZ2dlciwgTG9nTGV2ZWx9IGZyb20gJy4uLy4uL3NyYy9Mb2dnZXInO1xuXG5kZXNjcmliZSgnTG9nZ2VyJywgKCkgPT4ge1xuICAgIGRlc2NyaWJlKCcjYnJhbmQoKScsICgpID0+IHtcbiAgICAgICAgaXQoJ2NvbG91cnMgYSBzdHJpbmcnLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgcGxhaW5TdHJpbmcgPSAnaGVsbG8gd29ybGQnO1xuICAgICAgICAgICAgbGV0IGNvbG91cmVkU3RyaW5nID0gTG9nZ2VyLmJyYW5kKHBsYWluU3RyaW5nKTtcbiAgICAgICAgICAgIGlmIChjb2xvcnMuZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIGFzc2VydC5ub3RFcXVhbChjb2xvdXJlZFN0cmluZywgcGxhaW5TdHJpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKGNvbG9ycy5zdHJpcChjb2xvdXJlZFN0cmluZyksIHBsYWluU3RyaW5nKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgZGVzY3JpYmUoJyNsb2dXaXRoUHJlZml4KCknLCAoKSA9PiB7XG4gICAgICAgIGxldCBjb25zb2xlTG9nID0gY29uc29sZS5sb2c7XG4gICAgICAgIGxldCBvdXRwdXQgPSAnJztcbiAgICAgICAgYmVmb3JlRWFjaCgoZG9uZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2cgPSAobWVzc2FnZT86IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgYWZ0ZXJFYWNoKChkb25lKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyA9IGNvbnNvbGVMb2c7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdhZGRzIGEgcHJlZml4IHRvIGEgc3RyaW5nJywgKCkgPT4ge1xuICAgICAgICAgICAgTG9nZ2VyLmxvZ1dpdGhQcmVmaXgoJ2hlbGxvJywgJ3dvcmxkJyk7XG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwob3V0cHV0LCAnaGVsbG8gd29ybGQnKTtcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChMb2dnZXIubG9nV2l0aFByZWZpeCgnaGVsbG8nLCAnd29ybGQnLCBmYWxzZSksICdoZWxsbyB3b3JsZCcpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBkZXNjcmliZSgnI2xvZygpJywgKCkgPT4ge1xuICAgICAgICBsZXQgY29uc29sZUxvZyA9IGNvbnNvbGUubG9nO1xuICAgICAgICBsZXQgb3V0cHV0ID0gJyc7XG4gICAgICAgIGJlZm9yZUVhY2goKGRvbmUpID0+IHtcbiAgICAgICAgICAgIG91dHB1dCA9ICcnO1xuICAgICAgICAgICAgY29uc29sZS5sb2cgPSAobWVzc2FnZT86IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IG1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgYWZ0ZXJFYWNoKChkb25lKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyA9IGNvbnNvbGVMb2c7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdvbmx5IHByaW50cyBMb2cgYW5kIFdhcm4gbGV2ZWxzIGlmIHZlcmJvc2Ugb3B0aW9uIGlzIG9uJywgKCkgPT4ge1xuICAgICAgICAgICAgZ2xvYmFsLnZlcmJvc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIExvZ2dlci5sb2coJ0hlbGxvIFdvcmxkJywgTG9nTGV2ZWwuTG9nKTtcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChvdXRwdXQsICcnKTtcbiAgICAgICAgICAgIExvZ2dlci5sb2coJ0hlbGxvIFdvcmxkJywgTG9nTGV2ZWwuV2Fybik7XG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwob3V0cHV0LCAnJyk7XG4gICAgICAgICAgICBnbG9iYWwudmVyYm9zZSA9IHRydWU7XG4gICAgICAgICAgICBMb2dnZXIubG9nKCdIZWxsbycsIExvZ0xldmVsLkxvZyk7XG4gICAgICAgICAgICBhc3NlcnQubm90RXF1YWwob3V0cHV0LCAnJyk7XG4gICAgICAgICAgICBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIExvZ2dlci5sb2coJ1dvcmxkJywgTG9nTGV2ZWwuV2Fybik7XG4gICAgICAgICAgICBhc3NlcnQubm90RXF1YWwob3V0cHV0LCAnJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdvbmx5IHByaW50cyBEZWJ1ZyBsZXZlbCBpZiBkZWJ1ZyBvcHRpb24gaXMgb24nLCAoKSA9PiB7XG4gICAgICAgICAgICBnbG9iYWwuZGVidWcgPSBmYWxzZTtcbiAgICAgICAgICAgIExvZ2dlci5sb2coJ0hlbGxvIFdvcmxkJywgTG9nTGV2ZWwuRGVidWcpO1xuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKG91dHB1dCwgJycpO1xuICAgICAgICAgICAgZ2xvYmFsLmRlYnVnID0gdHJ1ZTtcbiAgICAgICAgICAgIExvZ2dlci5sb2coJ0hlbGxvJywgTG9nTGV2ZWwuRGVidWcpO1xuICAgICAgICAgICAgYXNzZXJ0Lm5vdEVxdWFsKG91dHB1dCwgJycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnYWx3YXlzIHByaW50cyBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICAgICAgICBnbG9iYWwuZGVidWcgPSBmYWxzZTtcbiAgICAgICAgICAgIGdsb2JhbC52ZXJib3NlID0gZmFsc2U7XG4gICAgICAgICAgICBMb2dnZXIubG9nKCdIZWxsbyBXb3JsZCcsIExvZ0xldmVsLkVycm9yKTtcbiAgICAgICAgICAgIGFzc2VydC5ub3RFcXVhbChvdXRwdXQsICcnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ2luZGVudHMgdGhlIHN0cmluZyBhZnRlciB0aGUgbmV3bGluZSBjaGFyYWN0ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICBnbG9iYWwuZGVidWcgPSBmYWxzZTtcbiAgICAgICAgICAgIGdsb2JhbC52ZXJib3NlID0gdHJ1ZTtcbiAgICAgICAgICAgIExvZ2dlci5sb2coJ0hlbGxvXFxuV29ybGQnKTtcbiAgICAgICAgICAgIGFzc2VydC5pc1RydWUoL1xcbihcXHMpKy9nLnRlc3Qob3V0cHV0KSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRlc2NyaWJlKCcjbG9nTWFueSgpJywgKCkgPT4ge1xuICAgICAgICBpdCgnbG9ncyBhbiBhcnJheScsICgpID0+IHtcbiAgICAgICAgICAgIGxldCBjb25zb2xlTG9nID0gY29uc29sZS5sb2c7XG4gICAgICAgICAgICBsZXQgb3V0cHV0ID0gW107XG4gICAgICAgICAgICBjb25zb2xlLmxvZyA9IChtZXNzYWdlPzogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gobWVzc2FnZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgTG9nZ2VyLmxvZ01hbnkoWycxJywgJzInLCAnMyddKTtcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChvdXRwdXQubGVuZ3RoLCAzKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nID0gY29uc29sZUxvZztcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgZGVzY3JpYmUoJyNzcGxpdCgpJywgKCkgPT4ge1xuICAgICAgICBpdCgndHJpbXMgbmV3bGluZSBjaGFyYWN0ZXJzJywgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHRlc3RTdHJpbmcgPSAnXFxuXFxuXFxuSGVsbG9cXG5cXG5cXG4nO1xuICAgICAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChMb2dnZXIuc3BsaXQodGVzdFN0cmluZyksIFsnSGVsbG8nXSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdCgnYnJlYWtzIHN0cmluZyBpbnRvIGFuIGFycmF5IGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgICAgICAgIGxldCB0ZXN0U3RyaW5nID0gJ1xcblxcblxcbkhlbGxvXFxuV29ybGRcXG5cXG5cXG4nO1xuICAgICAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChMb2dnZXIuc3BsaXQodGVzdFN0cmluZyksIFsnSGVsbG8nLCAnV29ybGQnXSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXX0=
