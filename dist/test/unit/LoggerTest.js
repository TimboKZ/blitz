"use strict";
var colors = require('colors');
var chai_1 = require('chai');
var Logger_1 = require('../../src/cli/Logger');
describe('Logger', function () {
    describe('#brand()', function () {
        it('colours a string', function () {
            var plainString = 'hello world';
            var colouredString = Logger_1.Logger.brand(plainString);
            if (colors.enabled) {
                chai_1.assert.notEqual(colouredString, plainString);
            }
            chai_1.assert.equal(colors.strip(colouredString), plainString);
        });
    });
    describe('#logWithPrefix()', function () {
        var consoleLog = console.log;
        var output = '';
        beforeEach(function (done) {
            console.log = function (message) {
                output = message;
            };
            done();
        });
        afterEach(function (done) {
            console.log = consoleLog;
            done();
        });
        it('adds a prefix to a string', function () {
            Logger_1.Logger.logWithPrefix('hello', 'world');
            chai_1.assert.equal(output, 'hello world');
            chai_1.assert.equal(Logger_1.Logger.logWithPrefix('hello', 'world', false), 'hello world');
        });
    });
    describe('#log()', function () {
        var consoleLog = console.log;
        var output = '';
        beforeEach(function (done) {
            output = '';
            console.log = function (message) {
                output = message;
            };
            done();
        });
        afterEach(function (done) {
            console.log = consoleLog;
            done();
        });
        it('only prints Log and Warn levels if verbose option is on', function () {
            global.verbose = false;
            Logger_1.Logger.log('Hello World', Logger_1.LogLevel.Log);
            chai_1.assert.equal(output, '');
            Logger_1.Logger.log('Hello World', Logger_1.LogLevel.Warn);
            chai_1.assert.equal(output, '');
            global.verbose = true;
            Logger_1.Logger.log('Hello', Logger_1.LogLevel.Log);
            chai_1.assert.notEqual(output, '');
            output = '';
            Logger_1.Logger.log('World', Logger_1.LogLevel.Warn);
            chai_1.assert.notEqual(output, '');
        });
        it('only prints Debug level if debug option is on', function () {
            global.debug = false;
            Logger_1.Logger.log('Hello World', Logger_1.LogLevel.Debug);
            chai_1.assert.equal(output, '');
            global.debug = true;
            Logger_1.Logger.log('Hello', Logger_1.LogLevel.Debug);
            chai_1.assert.notEqual(output, '');
        });
        it('always prints errors', function () {
            global.debug = false;
            global.verbose = false;
            Logger_1.Logger.log('Hello World', Logger_1.LogLevel.Error);
            chai_1.assert.notEqual(output, '');
        });
        it('indents the string after the newline character', function () {
            global.debug = false;
            global.verbose = true;
            Logger_1.Logger.log('Hello\nWorld');
            chai_1.assert.isTrue(/\n(\s)+/g.test(output));
        });
    });
    describe('#logMany()', function () {
        it('logs an array', function () {
            var consoleLog = console.log;
            var output = [];
            console.log = function (message) {
                output.push(message);
            };
            Logger_1.Logger.logMany(['1', '2', '3']);
            chai_1.assert.equal(output.length, 3);
            console.log = consoleLog;
        });
    });
    describe('#split()', function () {
        it('trims newline characters', function () {
            var testString = '\n\n\nHello\n\n\n';
            chai_1.assert.deepEqual(Logger_1.Logger.split(testString), ['Hello']);
        });
        it('breaks string into an array correctly', function () {
            var testString = '\n\n\nHello\nWorld\n\n\n';
            chai_1.assert.deepEqual(Logger_1.Logger.split(testString), ['Hello', 'World']);
        });
    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3Rlc3QvdW5pdC9Mb2dnZXJUZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFRQSxJQUFZLE1BQU0sV0FBTSxRQUFRLENBQUMsQ0FBQTtBQUNqQyxxQkFBcUIsTUFBTSxDQUFDLENBQUE7QUFDNUIsdUJBQStCLHNCQUFzQixDQUFDLENBQUE7QUFFdEQsUUFBUSxDQUFDLFFBQVEsRUFBRTtJQUNmLFFBQVEsQ0FBQyxVQUFVLEVBQUU7UUFDakIsRUFBRSxDQUFDLGtCQUFrQixFQUFFO1lBQ25CLElBQUksV0FBVyxHQUFHLGFBQWEsQ0FBQztZQUNoQyxJQUFJLGNBQWMsR0FBRyxlQUFNLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQy9DLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUNqQixhQUFNLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxXQUFXLENBQUMsQ0FBQztZQUNqRCxDQUFDO1lBQ0QsYUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQzVELENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFDSCxRQUFRLENBQUMsa0JBQWtCLEVBQUU7UUFDekIsSUFBSSxVQUFVLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQztRQUM3QixJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDaEIsVUFBVSxDQUFDLFVBQUMsSUFBSTtZQUNaLE9BQU8sQ0FBQyxHQUFHLEdBQUcsVUFBQyxPQUFnQjtnQkFDM0IsTUFBTSxHQUFHLE9BQU8sQ0FBQztZQUNyQixDQUFDLENBQUM7WUFDRixJQUFJLEVBQUUsQ0FBQztRQUNYLENBQUMsQ0FBQyxDQUFDO1FBQ0gsU0FBUyxDQUFDLFVBQUMsSUFBSTtZQUNYLE9BQU8sQ0FBQyxHQUFHLEdBQUcsVUFBVSxDQUFDO1lBQ3pCLElBQUksRUFBRSxDQUFDO1FBQ1gsQ0FB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Qyx1Q0FBdUMsRUFBRTtZQUN4QyxJQUFJLFVBQVUsR0FBRywwQkFBMEIsQ0FBQztZQUM1QyxhQUFNLENBQUMsU0FBUyxDQUFDLGVBQU0sQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNuRSxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJmaWxlIjoidGVzdC91bml0L0xvZ2dlclRlc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlIExvZ2dlciB0ZXN0c1xuICogQGF1dGhvciBUaW11ciBLdXpoYWdhbGl5ZXYgPHRpbS5rdXpoQGdtYWlsLmNvbT5cbiAqIEBjb3B5cmlnaHQgMjAxNlxuICogQGxpY2Vuc2UgR1BMLTMuMFxuICogQHNpbmNlIDAuMi4wXG4gKi9cblxuaW1wb3J0ICogYXMgY29sb3JzIGZyb20gJ2NvbG9ycyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnY2hhaSc7XG5pbXBvcnQge0xvZ2dlciwgTG9nTGV2ZWx9IGZyb20gJy4uLy4uL3NyYy9jbGkvTG9nZ2VyJztcblxuZGVzY3JpYmUoJ0xvZ2dlcicsICgpID0+IHtcbiAgICBkZXNjcmliZSgnI2JyYW5kKCknLCAoKSA9PiB7XG4gICAgICAgIGl0KCdjb2xvdXJzIGEgc3RyaW5nJywgKCkgPT4ge1xuICAgICAgICAgICAgbGV0IHBsYWluU3RyaW5nID0gJ2hlbGxvIHdvcmxkJztcbiAgICAgICAgICAgIGxldCBjb2xvdXJlZFN0cmluZyA9IExvZ2dlci5icmFuZChwbGFpblN0cmluZyk7XG4gICAgICAgICAgICBpZiAoY29sb3JzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQubm90RXF1YWwoY29sb3VyZWRTdHJpbmcsIHBsYWluU3RyaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChjb2xvcnMuc3RyaXAoY29sb3VyZWRTdHJpbmcpLCBwbGFpblN0cmluZyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRlc2NyaWJlKCcjbG9nV2l0aFByZWZpeCgpJywgKCkgPT4ge1xuICAgICAgICBsZXQgY29uc29sZUxvZyA9IGNvbnNvbGUubG9nO1xuICAgICAgICBsZXQgb3V0cHV0ID0gJyc7XG4gICAgICAgIGJlZm9yZUVhY2goKGRvbmUpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nID0gKG1lc3NhZ2U/OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFmdGVyRWFjaCgoZG9uZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2cgPSBjb25zb2xlTG9nO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnYWRkcyBhIHByZWZpeCB0byBhIHN0cmluZycsICgpID0+IHtcbiAgICAgICAgICAgIExvZ2dlci5sb2dXaXRoUHJlZml4KCdoZWxsbycsICd3b3JsZCcpO1xuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKG91dHB1dCwgJ2hlbGxvIHdvcmxkJyk7XG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwoTG9nZ2VyLmxvZ1dpdGhQcmVmaXgoJ2hlbGxvJywgJ3dvcmxkJywgZmFsc2UpLCAnaGVsbG8gd29ybGQnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgZGVzY3JpYmUoJyNsb2coKScsICgpID0+IHtcbiAgICAgICAgbGV0IGNvbnNvbGVMb2cgPSBjb25zb2xlLmxvZztcbiAgICAgICAgbGV0IG91dHB1dCA9ICcnO1xuICAgICAgICBiZWZvcmVFYWNoKChkb25lKSA9PiB7XG4gICAgICAgICAgICBvdXRwdXQgPSAnJztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nID0gKG1lc3NhZ2U/OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSBtZXNzYWdlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFmdGVyRWFjaCgoZG9uZSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2cgPSBjb25zb2xlTG9nO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnb25seSBwcmludHMgTG9nIGFuZCBXYXJuIGxldmVscyBpZiB2ZXJib3NlIG9wdGlvbiBpcyBvbicsICgpID0+IHtcbiAgICAgICAgICAgIGdsb2JhbC52ZXJib3NlID0gZmFsc2U7XG4gICAgICAgICAgICBMb2dnZXIubG9nKCdIZWxsbyBXb3JsZCcsIExvZ0xldmVsLkxvZyk7XG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwob3V0cHV0LCAnJyk7XG4gICAgICAgICAgICBMb2dnZXIubG9nKCdIZWxsbyBXb3JsZCcsIExvZ0xldmVsLldhcm4pO1xuICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKG91dHB1dCwgJycpO1xuICAgICAgICAgICAgZ2xvYmFsLnZlcmJvc2UgPSB0cnVlO1xuICAgICAgICAgICAgTG9nZ2VyLmxvZygnSGVsbG8nLCBMb2dMZXZlbC5Mb2cpO1xuICAgICAgICAgICAgYXNzZXJ0Lm5vdEVxdWFsKG91dHB1dCwgJycpO1xuICAgICAgICAgICAgb3V0cHV0ID0gJyc7XG4gICAgICAgICAgICBMb2dnZXIubG9nKCdXb3JsZCcsIExvZ0xldmVsLldhcm4pO1xuICAgICAgICAgICAgYXNzZXJ0Lm5vdEVxdWFsKG91dHB1dCwgJycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnb25seSBwcmludHMgRGVidWcgbGV2ZWwgaWYgZGVidWcgb3B0aW9uIGlzIG9uJywgKCkgPT4ge1xuICAgICAgICAgICAgZ2xvYmFsLmRlYnVnID0gZmFsc2U7XG4gICAgICAgICAgICBMb2dnZXIubG9nKCdIZWxsbyBXb3JsZCcsIExvZ0xldmVsLkRlYnVnKTtcbiAgICAgICAgICAgIGFzc2VydC5lcXVhbChvdXRwdXQsICcnKTtcbiAgICAgICAgICAgIGdsb2JhbC5kZWJ1ZyA9IHRydWU7XG4gICAgICAgICAgICBMb2dnZXIubG9nKCdIZWxsbycsIExvZ0xldmVsLkRlYnVnKTtcbiAgICAgICAgICAgIGFzc2VydC5ub3RFcXVhbChvdXRwdXQsICcnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ2Fsd2F5cyBwcmludHMgZXJyb3JzJywgKCkgPT4ge1xuICAgICAgICAgICAgZ2xvYmFsLmRlYnVnID0gZmFsc2U7XG4gICAgICAgICAgICBnbG9iYWwudmVyYm9zZSA9IGZhbHNlO1xuICAgICAgICAgICAgTG9nZ2VyLmxvZygnSGVsbG8gV29ybGQnLCBMb2dMZXZlbC5FcnJvcik7XG4gICAgICAgICAgICBhc3NlcnQubm90RXF1YWwob3V0cHV0LCAnJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdpbmRlbnRzIHRoZSBzdHJpbmcgYWZ0ZXIgdGhlIG5ld2xpbmUgY2hhcmFjdGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgZ2xvYmFsLmRlYnVnID0gZmFsc2U7XG4gICAgICAgICAgICBnbG9iYWwudmVyYm9zZSA9IHRydWU7XG4gICAgICAgICAgICBMb2dnZXIubG9nKCdIZWxsb1xcbldvcmxkJyk7XG4gICAgICAgICAgICBhc3NlcnQuaXNUcnVlKC9cXG4oXFxzKSsvZy50ZXN0KG91dHB1dCkpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBkZXNjcmliZSgnI2xvZ01hbnkoKScsICgpID0+IHtcbiAgICAgICAgaXQoJ2xvZ3MgYW4gYXJyYXknLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgY29uc29sZUxvZyA9IGNvbnNvbGUubG9nO1xuICAgICAgICAgICAgbGV0IG91dHB1dCA9IFtdO1xuICAgICAgICAgICAgY29uc29sZS5sb2cgPSAobWVzc2FnZT86IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIExvZ2dlci5sb2dNYW55KFsnMScsICcyJywgJzMnXSk7XG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwob3V0cHV0Lmxlbmd0aCwgMyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyA9IGNvbnNvbGVMb2c7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRlc2NyaWJlKCcjc3BsaXQoKScsICgpID0+IHtcbiAgICAgICAgaXQoJ3RyaW1zIG5ld2xpbmUgY2hhcmFjdGVycycsICgpID0+IHtcbiAgICAgICAgICAgIGxldCB0ZXN0U3RyaW5nID0gJ1xcblxcblxcbkhlbGxvXFxuXFxuXFxuJztcbiAgICAgICAgICAgIGFzc2VydC5kZWVwRXF1YWwoTG9nZ2VyLnNwbGl0KHRlc3RTdHJpbmcpLCBbJ0hlbGxvJ10pO1xuICAgICAgICB9KTtcbiAgICAgICAgaXQoJ2JyZWFrcyBzdHJpbmcgaW50byBhbiBhcnJheSBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgdGVzdFN0cmluZyA9ICdcXG5cXG5cXG5IZWxsb1xcbldvcmxkXFxuXFxuXFxuJztcbiAgICAgICAgICAgIGFzc2VydC5kZWVwRXF1YWwoTG9nZ2VyLnNwbGl0KHRlc3RTdHJpbmcpLCBbJ0hlbGxvJywgJ1dvcmxkJ10pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl19
