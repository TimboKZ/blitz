"use strict";
var chai_1 = require("chai");
var fs = require("fs-extra");
var path = require("path");
var child_process_1 = require("child_process");
var Util_1 = require("../../src/Util");
describe('Blitz project initialiser', function () {
    var basePath = process.cwd();
    var blitzCli = 'node ' + path.join(basePath, 'blitz-cli');
    var templatesPath = path.join(basePath, 'templates');
    var tempPath = path.join(basePath, 'temp');
    if (Util_1.Util.pathExists(tempPath)) {
        fs.removeSync(tempPath);
    }
    child_process_1.execSync('mkdir temp');
    var templateNames = fs.readdirSync(templatesPath);
    var nameCount = templateNames.length;
    var templatesTestInfo = [];
    var templateTestCount = 0;
    it('should not copy the `build` folder on init', function (done) {
        for (var i = 0; i < nameCount; i++) {
            var templateName = templateNames[i];
            child_process_1.execSync('mkdir ' + templateName, { cwd: tempPath });
            var projectPath = path.join(tempPath, templateName);
            child_process_1.execSync(blitzCli + ' init -t ' + templateName, { cwd: projectPath });
            templatesTestInfo.push({
                name: templateName,
                projectPath: projectPath,
                projectBuild: path.join(projectPath, 'build'),
                templatePath: path.join(templatesPath, templateName),
                templateBuild: path.join(templatesPath, templateName, 'build'),
            });
        }
        templateTestCount = templatesTestInfo.length;
        for (var i = 0; i < templateTestCount; i++) {
            var templateTestInfo = templatesTestInfo[i];
            chai_1.assert.isFalse(Util_1.Util.pathExists(templateTestInfo.projectBuild), templateTestInfo.name + ' template');
        }
        done();
    }).timeout(6000);
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3Rlc3QvaW50ZWdyYXRpb24vVGVtcGxhdGVzVGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBUUEsNkJBQTRCO0FBQzVCLDZCQUErQjtBQUMvQiwyQkFBNkI7QUFDN0IsK0NBQXVDO0FBQ3ZDLHVDQUFvQztBQUVwQyxRQUFRLENBQUMsMkJBQTJCLEVBQUU7SUFHbEMsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQzdCLElBQUksUUFBUSxHQUFHLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUMxRCxJQUFJLGFBQWEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUNyRCxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUMzQyxFQUFFLENBQUMsQ0FBQyxXQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1QixFQUFFLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFDRCx3QkFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ3ZCLElBQUksYUFBYSxHQUFHLEVBQUUsQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDbEQsSUFBSSxTQUFTLEdBQUcsYUFBYSxDQUFDLE1BQU0sQ0FBQztJQVVyQyxJQUFJLGlCQUFpQixHQUF3QixFQUFFLENBQUM7SUFDaEQsSUFBSSxpQkFBaUIsR0FBRyxDQUFDLENBQUM7SUFFMUIsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLFVBQUMsSUFBSTtRQUNsRCxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ2pDLElBQUksWUFBWSxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwQyx3QkFBUSxDQUFDLFFBQVEsR0FBRyxZQUFZLEVBQUUsRUFBQyxHQUFHLEVBQUUsUUFBUSxFQUFDLENBQUMsQ0FBQztZQUNuRCxJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxZQUFZLENBQUMsQ0FBQztZQUNwRCx3QkFBUSxDQUFDLFFBQVEsR0FBRyxXQUFXLEdBQUcsWUFBWSxFQUFFLEVBQUMsR0FBRyxFQUFFLFdBQVcsRUFBQyxDQUFDLENBQUM7WUFDcEUsaUJBQWlCLENBQUMsSUFBSSxDQUFDO2dCQUNuQixJQUFJLEVBQUUsWUFBWTtnQkFDbEIsV0FBVyxhQUFBO2dCQUNYLFlBQVksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxPQUFPLENBQUM7Z0JBQzdDLFlBQVksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxZQUFZLENBQUM7Z0JBQ3BELGFBQWEsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxZQUFZLEVBQUUsT0FBTyxDQUFDO2FBQ2pFLENBQUMsQ0FBQztRQUNQLENBQUM7UUFDRCxpQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQyxNQUFNLENBQUM7UUFDN0MsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxpQkFBaUIsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3pDLElBQUksZ0JBQWdCLEdBQUcsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUMsYUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFJLENBQUMsVUFBVSxDQUFDLGdCQUFnQixDQUFDLFlBQVksQ0FBQyxFQUFFLGdCQUFnQixDQUFDLElBQUksR0FBRyxXQUFXLENBQUMsQ0FBQztRQUN4RyxDQUFDO1FBQ0QsSUFBSSxFQUFFLENBQUM7SUFDWCxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFpRHJCLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6InRlc3QvaW50ZWdyYXRpb24vVGVtcGxhdGVzVGVzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUgVGVzdHMgdGhhdCB3ZWJzaXRlcyBhcmUgYnVpbHQgY29ycmVjdGx5IGZyb20gdGVtcGxhdGVzXG4gKiBAYXV0aG9yIFRpbXVyIEt1emhhZ2FsaXlldiA8dGltLmt1emhAZ21haWwuY29tPlxuICogQGNvcHlyaWdodCAyMDE2XG4gKiBAbGljZW5zZSBHUEwtMy4wXG4gKiBAc2luY2UgMC4xLjRcbiAqL1xuXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnY2hhaSc7XG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcy1leHRyYSc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHtleGVjU3luY30gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQge1V0aWx9IGZyb20gJy4uLy4uL3NyYy9VdGlsJztcblxuZGVzY3JpYmUoJ0JsaXR6IHByb2plY3QgaW5pdGlhbGlzZXInLCAoKSA9PiB7XG5cbiAgICAvLyBHZXQgbGlzdCBvZiB0ZW1wbGF0ZXMsIHByZXBhcmUgdGhlIGB0ZW1wYCBmb2xkZXJcbiAgICBsZXQgYmFzZVBhdGggPSBwcm9jZXNzLmN3ZCgpO1xuICAgIGxldCBibGl0ekNsaSA9ICdub2RlICcgKyBwYXRoLmpvaW4oYmFzZVBhdGgsICdibGl0ei1jbGknKTtcbiAgICBsZXQgdGVtcGxhdGVzUGF0aCA9IHBhdGguam9pbihiYXNlUGF0aCwgJ3RlbXBsYXRlcycpO1xuICAgIGxldCB0ZW1wUGF0aCA9IHBhdGguam9pbihiYXNlUGF0aCwgJ3RlbXAnKTtcbiAgICBpZiAoVXRpbC5wYXRoRXhpc3RzKHRlbXBQYXRoKSkge1xuICAgICAgICBmcy5yZW1vdmVTeW5jKHRlbXBQYXRoKTtcbiAgICB9XG4gICAgZXhlY1N5bmMoJ21rZGlyIHRlbXAnKTtcbiAgICBsZXQgdGVtcGxhdGVOYW1lcyA9IGZzLnJlYWRkaXJTeW5jKHRlbXBsYXRlc1BhdGgpO1xuICAgIGxldCBuYW1lQ291bnQgPSB0ZW1wbGF0ZU5hbWVzLmxlbmd0aDtcblxuICAgIC8vIEluaXRpYWxpc2UgcHJvamVjdHMgZm9yIGFsbCB0ZW1wbGF0ZXNcbiAgICBpbnRlcmZhY2UgSVRlbXBsYXRlVGVzdEluZm8ge1xuICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICAgIHByb2plY3RQYXRoOiBzdHJpbmc7XG4gICAgICAgIHByb2plY3RCdWlsZDogc3RyaW5nO1xuICAgICAgICB0ZW1wbGF0ZVBhdGg6IHN0cmluZztcbiAgICAgICAgdGVtcGxhdGVCdWlsZDogc3RyaW5nO1xuICAgIH1cbiAgICBsZXQgdGVtcGxhdGVzVGVzdEluZm86IElUZW1wbGF0ZVRlc3RJbmZvW10gPSBbXTtcbiAgICBsZXQgdGVtcGxhdGVUZXN0Q291bnQgPSAwO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgY29weSB0aGUgYGJ1aWxkYCBmb2xkZXIgb24gaW5pdCcsIChkb25lKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZU5hbWUgPSB0ZW1wbGF0ZU5hbWVzW2ldO1xuICAgICAgICAgICAgZXhlY1N5bmMoJ21rZGlyICcgKyB0ZW1wbGF0ZU5hbWUsIHtjd2Q6IHRlbXBQYXRofSk7XG4gICAgICAgICAgICBsZXQgcHJvamVjdFBhdGggPSBwYXRoLmpvaW4odGVtcFBhdGgsIHRlbXBsYXRlTmFtZSk7XG4gICAgICAgICAgICBleGVjU3luYyhibGl0ekNsaSArICcgaW5pdCAtdCAnICsgdGVtcGxhdGVOYW1lLCB7Y3dkOiBwcm9qZWN0UGF0aH0pO1xuICAgICAgICAgICAgdGVtcGxhdGVzVGVzdEluZm8ucHVzaCh7XG4gICAgICAgICAgICAgICAgbmFtZTogdGVtcGxhdGVOYW1lLFxuICAgICAgICAgICAgICAgIHByb2plY3RQYXRoLFxuICAgICAgICAgICAgICAgIHByb2plY3RCdWlsZDogcGF0aC5qb2luKHByb2plY3RQYXRoLCAnYnVpbGQnKSxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVBhdGg6IHBhdGguam9pbih0ZW1wbGF0ZXNQYXRoLCB0ZW1wbGF0ZU5hbWUpLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlQnVpbGQ6IHBhdGguam9pbih0ZW1wbGF0ZXNQYXRoLCB0ZW1wbGF0ZU5hbWUsICdidWlsZCcpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGVtcGxhdGVUZXN0Q291bnQgPSB0ZW1wbGF0ZXNUZXN0SW5mby5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVtcGxhdGVUZXN0Q291bnQ7IGkrKykge1xuICAgICAgICAgICAgbGV0IHRlbXBsYXRlVGVzdEluZm8gPSB0ZW1wbGF0ZXNUZXN0SW5mb1tpXTtcbiAgICAgICAgICAgIGFzc2VydC5pc0ZhbHNlKFV0aWwucGF0aEV4aXN0cyh0ZW1wbGF0ZVRlc3RJbmZvLnByb2plY3RCdWlsZCksIHRlbXBsYXRlVGVzdEluZm8ubmFtZSArICcgdGVtcGxhdGUnKTtcbiAgICAgICAgfVxuICAgICAgICBkb25lKCk7XG4gICAgfSkudGltZW91dCg2MDAwKTtcblxuICAgIC8vIGl0KCdzaG91bGQgY3JlYXRlIGEgYGJ1aWxkYCBmb2xkZXIgb24gYnVpbGQnLCAoZG9uZSkgPT4ge1xuICAgIC8vICAgICAvLyBCdWlsZCBhbGwgcHJvamVjdHNcbiAgICAvLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW1wbGF0ZVRlc3RDb3VudDsgaSsrKSB7XG4gICAgLy8gICAgICAgICBsZXQgdGVtcGxhdGVUZXN0SW5mbyA9IHRlbXBsYXRlc1Rlc3RJbmZvW2ldO1xuICAgIC8vICAgICAgICAgZXhlY1N5bmMoYmxpdHpDbGkgKyAnIGJ1aWxkJywge2N3ZDogdGVtcGxhdGVUZXN0SW5mby5wcm9qZWN0UGF0aH0pO1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVtcGxhdGVUZXN0Q291bnQ7IGkrKykge1xuICAgIC8vICAgICAgICAgbGV0IHRlbXBsYXRlVGVzdEluZm8gPSB0ZW1wbGF0ZXNUZXN0SW5mb1tpXTtcbiAgICAvLyAgICAgICAgIGFzc2VydC5pc1RydWUoVXRpbC5wYXRoRXhpc3RzKHRlbXBsYXRlVGVzdEluZm8ucHJvamVjdEJ1aWxkKSwgdGVtcGxhdGVUZXN0SW5mby5uYW1lICsgJyB0ZW1wbGF0ZScpO1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIGRvbmUoKTtcbiAgICAvLyB9KS50aW1lb3V0KDYwMDApO1xuICAgIC8vXG4gICAgLy8gaXQoJ3Nob3VsZCBnZW5lcmF0ZSB2YWxpZCBidWlsZCcsIChkb25lKSA9PiB7XG4gICAgLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVtcGxhdGVUZXN0Q291bnQ7IGkrKykge1xuICAgIC8vICAgICAgICAgbGV0IHRlbXBsYXRlVGVzdEluZm8gPSB0ZW1wbGF0ZXNUZXN0SW5mb1tpXTtcbiAgICAvLyAgICAgICAgIGlmICghVXRpbC5wYXRoRXhpc3RzKHRlbXBsYXRlVGVzdEluZm8udGVtcGxhdGVCdWlsZCkpIHtcbiAgICAvLyAgICAgICAgICAgICBhc3NlcnQuZXF1YWwoZnMud2Fsa1N5bmModGVtcGxhdGVUZXN0SW5mby5wcm9qZWN0QnVpbGQpLmxlbmd0aCwgMCk7XG4gICAgLy8gICAgICAgICAgICAgY29udGludWU7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgICAgICBsZXQgdGVtcGxhdGVCdWlsZEZpbGVzID0gZnMud2Fsa1N5bmModGVtcGxhdGVUZXN0SW5mby50ZW1wbGF0ZUJ1aWxkKTtcbiAgICAvLyAgICAgICAgIGxldCBwcm9qZWN0QnVpbGRGaWxlcyA9IGZzLndhbGtTeW5jKHRlbXBsYXRlVGVzdEluZm8ucHJvamVjdEJ1aWxkKTtcbiAgICAvLyAgICAgICAgIGFzc2VydC5lcXVhbChwcm9qZWN0QnVpbGRGaWxlcy5sZW5ndGgsIHRlbXBsYXRlQnVpbGRGaWxlcy5sZW5ndGgpO1xuICAgIC8vICAgICAgICAgbGV0IGNvdW50ID0gdGVtcGxhdGVCdWlsZEZpbGVzLmxlbmd0aDtcbiAgICAvLyAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY291bnQ7IGsrKykge1xuICAgIC8vICAgICAgICAgICAgIGFzc2VydC5kZWVwRXF1YWwocGF0aC5yZWxhdGl2ZShcbiAgICAvLyAgICAgICAgICAgICAgICAgdGVtcGxhdGVUZXN0SW5mby50ZW1wbGF0ZVBhdGgsXG4gICAgLy8gICAgICAgICAgICAgICAgIHRlbXBsYXRlQnVpbGRGaWxlc1trXVxuICAgIC8vICAgICAgICAgICAgICksIHBhdGgucmVsYXRpdmUoXG4gICAgLy8gICAgICAgICAgICAgICAgIHRlbXBsYXRlVGVzdEluZm8ucHJvamVjdFBhdGgsXG4gICAgLy8gICAgICAgICAgICAgICAgIHByb2plY3RCdWlsZEZpbGVzW2tdXG4gICAgLy8gICAgICAgICAgICAgKSk7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNvdW50OyBrKyspIHtcbiAgICAvLyAgICAgICAgICAgICBsZXQgdGVtcGxhdGVGaWxlID0gdGVtcGxhdGVCdWlsZEZpbGVzW2tdO1xuICAgIC8vICAgICAgICAgICAgIGxldCBwcm9qZWN0RmlsZSA9IHByb2plY3RCdWlsZEZpbGVzW2tdO1xuICAgIC8vICAgICAgICAgICAgIGFzc2VydC5lcXVhbChVdGlsLmdldEZpbGVDb250ZW50cyhwcm9qZWN0RmlsZSksIFV0aWwuZ2V0RmlsZUNvbnRlbnRzKHRlbXBsYXRlRmlsZSkpO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vXG4gICAgLy8gICAgIH1cbiAgICAvL1xuICAgIC8vICAgICAvLyBSZW1vdmUgdGVtcCBmb2xkZXJcbiAgICAvLyAgICAgZnMucmVtb3ZlU3luYyh0ZW1wUGF0aCk7XG4gICAgLy9cbiAgICAvLyAgICAgZG9uZSgpO1xuICAgIC8vIH0pLnRpbWVvdXQoNjAwMCk7XG5cbn0pO1xuIl19
