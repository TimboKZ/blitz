"use strict";
var chai_1 = require('chai');
var fs = require('fs-extra');
var path = require('path');
var child_process_1 = require('child_process');
var Util_1 = require('../../src/Util');
describe('Blitz project initialiser', function () {
    var basePath = process.cwd();
    var blitzCli = 'node ' + path.join(basePath, 'blitz-cli');
    var templatesPath = path.join(basePath, 'templates');
    var tempPath = path.join(basePath, 'temp');
    if (Util_1.Util.pathExists(tempPath)) {
        fs.removeSync(tempPath);
    }
    child_process_1.execSync('mkdir temp');
    var templateNames = fs.readdirSync(templatesPath);
    var nameCount = templateNames.length;
    var templatesTestInfo = [];
    var templateTestCount = 0;
    it('should not copy the `build` folder on init', function (done) {
        for (var i = 0; i < nameCount; i++) {
            var templateName = templateNames[i];
            child_process_1.execSync('mkdir ' + templateName, { cwd: tempPath });
            var projectPath = path.join(tempPath, templateName);
            child_process_1.execSync(blitzCli + ' init -t ' + templateName, { cwd: projectPath });
            templatesTestInfo.push({
                name: templateName,
                projectPath: projectPath,
                projectBuild: path.join(projectPath, 'build'),
                templatePath: path.join(templatesPath, templateName),
                templateBuild: path.join(templatesPath, templateName, 'build'),
            });
        }
        templateTestCount = templatesTestInfo.length;
        for (var i = 0; i < templateTestCount; i++) {
            var templateTestInfo = templatesTestInfo[i];
            chai_1.assert.isFalse(Util_1.Util.pathExists(templateTestInfo.projectBuild), templateTestInfo.name + ' template');
        }
        done();
    }).timeout(6000);
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3Rlc3QvaW50ZWdyYXRpb24vVGVtcGxhdGVzVGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBUUEscUJBQXFCLE1BQU0sQ0FBQyxDQUFBO0FBQzVCLElBQVksRUFBRSxXQUFNLFVBQVUsQ0FBQyxDQUFBO0FBQy9CLElBQVksSUFBSSxXQUFNLE1BQU0sQ0FBQyxDQUFBO0FBQzdCLDhCQUF1QixlQUFlLENBQUMsQ0FBQTtBQUN2QyxxQkFBbUIsZ0JBQWdCLENBQUMsQ0FBQTtBQUVwQyxRQUFRLENBQUMsMkJBQTJCLEVBQUU7SUFHbEMsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQzdCLElBQUksUUFBUSxHQUFHLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUMxRCxJQUFJLGFBQWEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUNyRCxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUMzQyxFQUFFLENBQUMsQ0FBQyxXQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1QixFQUFFLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFDRCx3QkFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ3ZCLElBQUksYUFBYSxHQUFHLEVBQUUsQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDbEQsSUFBSSxTQUFTLEdBQUcsYUFBYSxDQUFDLE1BQU0sQ0FBQztJQVVyQyxJQUFJLGlCQUFpQixHQUF3QixFQUFFLENBQUM7SUFDaEQsSUFBSSxpQkFBaUIsR0FBRyxDQUFDLENBQUM7SUFFMUIsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLFVBQUMsSUFBSTtRQUNsRCxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ2pDLElBQUksWUFBWSxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwQyx3QkFBUSxDQUFDLFFBQVEsR0FBRyxZQUFZLEVBQUUsRUFBQyxHQUFHLEVBQUUsUUFBUSxFQUFDLENBQUMsQ0FBQztZQUNuRCxJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxZQUFZLENBQUMsQ0FBQztZQUNwRCx3QkFBUSxDQUFDLFFBQVEsR0FBRyxXQUFXLEdBQUcsWUFBWSxFQUFFLEVBQUMsR0FBRyxFQUFFLFdBQVcsRUFBQyxDQUFDLENBQUM7WUFDcEUsaUJBQWlCLENBQUMsSUFBSSxDQUFDO2dCQUNuQixJQUFJLEVBQUUsWUFBWTtnQkFDbEIsd0JBQVc7Z0JBQ1gsWUFBWSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQztnQkFDN0MsWUFBWSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLFlBQVksQ0FBQztnQkFDcEQsYUFBYSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLFlBQVksRUFBRSxPQUFPLENBQUM7YUFDakUsQ0FBQyxDQUFDO1FBQ1AsQ0FBQztRQUNELGlCQUFpQixHQUFHLGlCQUFpQixDQUFDLE1BQU0sQ0FBQztRQUM3QyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLGlCQUFpQixFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDekMsSUFBSSxnQkFBZ0IsR0FBRyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1QyxhQUFNLENBQUMsT0FBTyxDQUFDLFdBQUksQ0FBQyxVQUFVLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxDQUFDLEVBQUUsZ0JBQWdCLENBQUMsSUFBSSxHQUFHLFdBQVcsQ0FBQyxDQUFDO1FBQ3hHLENBQUM7UUFDRCxJQUFJLEVBQUUsQ0FBQztJQUNYLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQWlEckIsQ0FBQyxDQUFDLENBQUMiLCJmaWxlIjoidGVzdC9pbnRlZ3JhdGlvbi9UZW1wbGF0ZXNUZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSBUZXN0cyB0aGF0IHdlYnNpdGVzIGFyZSBidWlsdCBjb3JyZWN0bHkgZnJvbSB0ZW1wbGF0ZXNcbiAqIEBhdXRob3IgVGltdXIgS3V6aGFnYWxpeWV2IDx0aW0ua3V6aEBnbWFpbC5jb20+XG4gKiBAY29weXJpZ2h0IDIwMTZcbiAqIEBsaWNlbnNlIEdQTC0zLjBcbiAqIEBzaW5jZSAwLjEuNFxuICovXG5cbmltcG9ydCB7YXNzZXJ0fSBmcm9tICdjaGFpJztcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQge2V4ZWNTeW5jfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCB7VXRpbH0gZnJvbSAnLi4vLi4vc3JjL1V0aWwnO1xuXG5kZXNjcmliZSgnQmxpdHogcHJvamVjdCBpbml0aWFsaXNlcicsICgpID0+IHtcblxuICAgIC8vIEdldCBsaXN0IG9mIHRlbXBsYXRlcywgcHJlcGFyZSB0aGUgYHRlbXBgIGZvbGRlclxuICAgIGxldCBiYXNlUGF0aCA9IHByb2Nlc3MuY3dkKCk7XG4gICAgbGV0IGJsaXR6Q2xpID0gJ25vZGUgJyArIHBhdGguam9pbihiYXNlUGF0aCwgJ2JsaXR6LWNsaScpO1xuICAgIGxldCB0ZW1wbGF0ZXNQYXRoID0gcGF0aC5qb2luKGJhc2VQYXRoLCAndGVtcGxhdGVzJyk7XG4gICAgbGV0IHRlbXBQYXRoID0gcGF0aC5qb2luKGJhc2VQYXRoLCAndGVtcCcpO1xuICAgIGlmIChVdGlsLnBhdGhFeGlzdHModGVtcFBhdGgpKSB7XG4gICAgICAgIGZzLnJlbW92ZVN5bmModGVtcFBhdGgpO1xuICAgIH1cbiAgICBleGVjU3luYygnbWtkaXIgdGVtcCcpO1xuICAgIGxldCB0ZW1wbGF0ZU5hbWVzID0gZnMucmVhZGRpclN5bmModGVtcGxhdGVzUGF0aCk7XG4gICAgbGV0IG5hbWVDb3VudCA9IHRlbXBsYXRlTmFtZXMubGVuZ3RoO1xuXG4gICAgLy8gSW5pdGlhbGlzZSBwcm9qZWN0cyBmb3IgYWxsIHRlbXBsYXRlc1xuICAgIGludGVyZmFjZSBJVGVtcGxhdGVUZXN0SW5mbyB7XG4gICAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgICAgcHJvamVjdFBhdGg6IHN0cmluZztcbiAgICAgICAgcHJvamVjdEJ1aWxkOiBzdHJpbmc7XG4gICAgICAgIHRlbXBsYXRlUGF0aDogc3RyaW5nO1xuICAgICAgICB0ZW1wbGF0ZUJ1aWxkOiBzdHJpbmc7XG4gICAgfVxuICAgIGxldCB0ZW1wbGF0ZXNUZXN0SW5mbzogSVRlbXBsYXRlVGVzdEluZm9bXSA9IFtdO1xuICAgIGxldCB0ZW1wbGF0ZVRlc3RDb3VudCA9IDA7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBjb3B5IHRoZSBgYnVpbGRgIGZvbGRlciBvbiBpbml0JywgKGRvbmUpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgbGV0IHRlbXBsYXRlTmFtZSA9IHRlbXBsYXRlTmFtZXNbaV07XG4gICAgICAgICAgICBleGVjU3luYygnbWtkaXIgJyArIHRlbXBsYXRlTmFtZSwge2N3ZDogdGVtcFBhdGh9KTtcbiAgICAgICAgICAgIGxldCBwcm9qZWN0UGF0aCA9IHBhdGguam9pbih0ZW1wUGF0aCwgdGVtcGxhdGVOYW1lKTtcbiAgICAgICAgICAgIGV4ZWNTeW5jKGJsaXR6Q2xpICsgJyBpbml0IC10ICcgKyB0ZW1wbGF0ZU5hbWUsIHtjd2Q6IHByb2plY3RQYXRofSk7XG4gICAgICAgICAgICB0ZW1wbGF0ZXNUZXN0SW5mby5wdXNoKHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0ZW1wbGF0ZU5hbWUsXG4gICAgICAgICAgICAgICAgcHJvamVjdFBhdGgsXG4gICAgICAgICAgICAgICAgcHJvamVjdEJ1aWxkOiBwYXRoLmpvaW4ocHJvamVjdFBhdGgsICdidWlsZCcpLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlUGF0aDogcGF0aC5qb2luKHRlbXBsYXRlc1BhdGgsIHRlbXBsYXRlTmFtZSksXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVCdWlsZDogcGF0aC5qb2luKHRlbXBsYXRlc1BhdGgsIHRlbXBsYXRlTmFtZSwgJ2J1aWxkJyksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0ZW1wbGF0ZVRlc3RDb3VudCA9IHRlbXBsYXRlc1Rlc3RJbmZvLmxlbmd0aDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW1wbGF0ZVRlc3RDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdGVtcGxhdGVUZXN0SW5mbyA9IHRlbXBsYXRlc1Rlc3RJbmZvW2ldO1xuICAgICAgICAgICAgYXNzZXJ0LmlzRmFsc2UoVXRpbC5wYXRoRXhpc3RzKHRlbXBsYXRlVGVzdEluZm8ucHJvamVjdEJ1aWxkKSwgdGVtcGxhdGVUZXN0SW5mby5uYW1lICsgJyB0ZW1wbGF0ZScpO1xuICAgICAgICB9XG4gICAgICAgIGRvbmUoKTtcbiAgICB9KS50aW1lb3V0KDYwMDApO1xuXG4gICAgLy8gaXQoJ3Nob3VsZCBjcmVhdGUgYSBgYnVpbGRgIGZvbGRlciBvbiBidWlsZCcsIChkb25lKSA9PiB7XG4gICAgLy8gICAgIC8vIEJ1aWxkIGFsbCBwcm9qZWN0c1xuICAgIC8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlbXBsYXRlVGVzdENvdW50OyBpKyspIHtcbiAgICAvLyAgICAgICAgIGxldCB0ZW1wbGF0ZVRlc3RJbmZvID0gdGVtcGxhdGVzVGVzdEluZm9baV07XG4gICAgLy8gICAgICAgICBleGVjU3luYyhibGl0ekNsaSArICcgYnVpbGQnLCB7Y3dkOiB0ZW1wbGF0ZVRlc3RJbmZvLnByb2plY3RQYXRofSk7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW1wbGF0ZVRlc3RDb3VudDsgaSsrKSB7XG4gICAgLy8gICAgICAgICBsZXQgdGVtcGxhdGVUZXN0SW5mbyA9IHRlbXBsYXRlc1Rlc3RJbmZvW2ldO1xuICAgIC8vICAgICAgICAgYXNzZXJ0LmlzVHJ1ZShVdGlsLnBhdGhFeGlzdHModGVtcGxhdGVUZXN0SW5mby5wcm9qZWN0QnVpbGQpLCB0ZW1wbGF0ZVRlc3RJbmZvLm5hbWUgKyAnIHRlbXBsYXRlJyk7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgZG9uZSgpO1xuICAgIC8vIH0pLnRpbWVvdXQoNjAwMCk7XG4gICAgLy9cbiAgICAvLyBpdCgnc2hvdWxkIGdlbmVyYXRlIHZhbGlkIGJ1aWxkJywgKGRvbmUpID0+IHtcbiAgICAvLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW1wbGF0ZVRlc3RDb3VudDsgaSsrKSB7XG4gICAgLy8gICAgICAgICBsZXQgdGVtcGxhdGVUZXN0SW5mbyA9IHRlbXBsYXRlc1Rlc3RJbmZvW2ldO1xuICAgIC8vICAgICAgICAgaWYgKCFVdGlsLnBhdGhFeGlzdHModGVtcGxhdGVUZXN0SW5mby50ZW1wbGF0ZUJ1aWxkKSkge1xuICAgIC8vICAgICAgICAgICAgIGFzc2VydC5lcXVhbChmcy53YWxrU3luYyh0ZW1wbGF0ZVRlc3RJbmZvLnByb2plY3RCdWlsZCkubGVuZ3RoLCAwKTtcbiAgICAvLyAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIGxldCB0ZW1wbGF0ZUJ1aWxkRmlsZXMgPSBmcy53YWxrU3luYyh0ZW1wbGF0ZVRlc3RJbmZvLnRlbXBsYXRlQnVpbGQpO1xuICAgIC8vICAgICAgICAgbGV0IHByb2plY3RCdWlsZEZpbGVzID0gZnMud2Fsa1N5bmModGVtcGxhdGVUZXN0SW5mby5wcm9qZWN0QnVpbGQpO1xuICAgIC8vICAgICAgICAgYXNzZXJ0LmVxdWFsKHByb2plY3RCdWlsZEZpbGVzLmxlbmd0aCwgdGVtcGxhdGVCdWlsZEZpbGVzLmxlbmd0aCk7XG4gICAgLy8gICAgICAgICBsZXQgY291bnQgPSB0ZW1wbGF0ZUJ1aWxkRmlsZXMubGVuZ3RoO1xuICAgIC8vICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb3VudDsgaysrKSB7XG4gICAgLy8gICAgICAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbChwYXRoLnJlbGF0aXZlKFxuICAgIC8vICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVRlc3RJbmZvLnRlbXBsYXRlUGF0aCxcbiAgICAvLyAgICAgICAgICAgICAgICAgdGVtcGxhdGVCdWlsZEZpbGVzW2tdXG4gICAgLy8gICAgICAgICAgICAgKSwgcGF0aC5yZWxhdGl2ZShcbiAgICAvLyAgICAgICAgICAgICAgICAgdGVtcGxhdGVUZXN0SW5mby5wcm9qZWN0UGF0aCxcbiAgICAvLyAgICAgICAgICAgICAgICAgcHJvamVjdEJ1aWxkRmlsZXNba11cbiAgICAvLyAgICAgICAgICAgICApKTtcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgY291bnQ7IGsrKykge1xuICAgIC8vICAgICAgICAgICAgIGxldCB0ZW1wbGF0ZUZpbGUgPSB0ZW1wbGF0ZUJ1aWxkRmlsZXNba107XG4gICAgLy8gICAgICAgICAgICAgbGV0IHByb2plY3RGaWxlID0gcHJvamVjdEJ1aWxkRmlsZXNba107XG4gICAgLy8gICAgICAgICAgICAgYXNzZXJ0LmVxdWFsKFV0aWwuZ2V0RmlsZUNvbnRlbnRzKHByb2plY3RGaWxlKSwgVXRpbC5nZXRGaWxlQ29udGVudHModGVtcGxhdGVGaWxlKSk7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy9cbiAgICAvLyAgICAgfVxuICAgIC8vXG4gICAgLy8gICAgIC8vIFJlbW92ZSB0ZW1wIGZvbGRlclxuICAgIC8vICAgICBmcy5yZW1vdmVTeW5jKHRlbXBQYXRoKTtcbiAgICAvL1xuICAgIC8vICAgICBkb25lKCk7XG4gICAgLy8gfSkudGltZW91dCg2MDAwKTtcblxufSk7XG4iXX0=
