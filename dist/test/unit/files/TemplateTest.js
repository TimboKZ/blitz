"use strict";
var pug = require("pug");
var chai_1 = require("chai");
var Template_1 = require("../../../src/components/Template");
describe('Template', function () {
    describe('#prepare()', function () {
        it('extracts IDs correctly', function () {
            var template = new Template_1.Template();
            var templateString = '-- url(\'hello\')\n-- url(\'world\')\n-- url()';
            template.prepare(templateString, {}, {});
            chai_1.assert.deepEqual(template.getIds(), ['hello', 'world']);
        });
        it('extracts assets correctly', function () {
            var template = new Template_1.Template();
            var templateString = '-- asset(\'style.css\')\n-- asset(\'world.js\')';
            template.prepare(templateString, {}, {});
            chai_1.assert.deepEqual(template.getAssets(), ['style.css', 'world.js']);
        });
        it('extracts menus correctly', function () {
            var template = new Template_1.Template();
            var templateString = 'each value in menus.main\n  p= value';
            templateString += '\neach value in menus.secondary\n  p= value';
            var menusObject = {
                main: [],
                secondary: [],
            };
            template.prepare(templateString, {}, menusObject);
            chai_1.assert.deepEqual(template.getMenus(), ['main', 'secondary']);
        });
    });
    describe('#generate()', function () {
        it('throws an error if nothing was prepared', function () {
            var template = new Template_1.Template();
            chai_1.assert.throws(function () { return template.generate(); });
        });
        it('generates HTML string correctly', function () {
            var template = new Template_1.Template();
            var templateString = 'p Hello World!';
            template.prepare(templateString, {}, {});
            chai_1.assert.equal(template.generate(), pug.render(templateString));
        });
    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3Rlc3QvdW5pdC9maWxlcy9UZW1wbGF0ZVRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQVFBLHlCQUEyQjtBQUMzQiw2QkFBNEI7QUFDNUIsNkRBQTBEO0FBRzFELFFBQVEsQ0FBQyxVQUFVLEVBQUU7SUFDakIsUUFBUSxDQUFDLFlBQVksRUFBRTtRQUNuQixFQUFFLENBQUMsd0JBQXdCLEVBQUU7WUFDekIsSUFBSSxRQUFRLEdBQUcsSUFBSSxtQkFBUSxFQUFFLENBQUM7WUFDOUIsSUFBSSxjQUFjLEdBQUcsZ0RBQWdELENBQUM7WUFDdEUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQ3pDLGFBQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDNUQsQ0FBQyxDQUFDLENBQUM7UUFDSCxFQUFFLENBQUMsMkJBQTJCLEVBQUU7WUFDNUIsSUFBSSxRQUFRLEdBQUcsSUFBSSxtQkFBUSxFQUFFLENBQUM7WUFDOUIsSUFBSSxjQUFjLEdBQUcsaURBQWlELENBQUM7WUFDdkUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQ3pDLGFBQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsV0FBVyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDdEUsQ0FBQyxDQUFDLENBQUM7UUFDSCxFQUFFLENBQUMsMEJBQTBCLEVBQUU7WUFDM0IsSUFBSSxRQUFRLEdBQUcsSUFBSSxtQkFBUSxFQUFFLENBQUM7WUFDOUIsSUFBSSxjQUFjLEdBQUcsc0NBQXNDLENBQUM7WUFDNUQsY0FBYyxJQUFJLDZDQUE2QyxDQUFDO1lBQ2hFLElBQUksV0FBVyxHQUFpQjtnQkFDNUIsSUFBSSxFQUFFLEVBQUU7Z0JBQ1IsU0FBUyxFQUFFLEVBQUU7YUFDaEIsQ0FBQztZQUNGLFFBQVEsQ0FBQyxPQUFPLENBQUMsY0FBYyxFQUFFLEVBQUUsRUFBRSxXQUFXLENBQUMsQ0FBQztZQUNsRCxhQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7SUFDSCxRQUFRLENBQUMsYUFBYSxFQUFFO1FBQ3BCLEVBQUUsQ0FBQyx5Q0FBeUMsRUFBRTtZQUMxQyxJQUFJLFFBQVEsR0FBRyxJQUFJLG1CQUFRLEVBQUUsQ0FBQztZQUM5QixhQUFNLENBQUMsTUFBTSxDQUFDLGNBQU0sT0FBQSxRQUFRLENBQUMsUUFBUSxFQUFFLEVBQW5CLENBQW1CLENBQUMsQ0FBQztRQUM3QyxDQUFDLENBQUMsQ0FBQztRQUNILEVBQUUsQ0FBQyxpQ0FBaUMsRUFBRTtZQUNsQyxJQUFJLFFBQVEsR0FBRyxJQUFJLG1CQUFRLEVBQUUsQ0FBQztZQUM5QixJQUFJLGNBQWMsR0FBRyxnQkFBZ0IsQ0FBQztZQUN0QyxRQUFRLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDekMsYUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO1FBQ2xFLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsImZpbGUiOiJ0ZXN0L3VuaXQvZmlsZXMvVGVtcGxhdGVUZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSBUZW1wbGF0ZSB0ZXN0c1xuICogQGF1dGhvciBUaW11ciBLdXpoYWdhbGl5ZXYgPHRpbS5rdXpoQGdtYWlsLmNvbT5cbiAqIEBjb3B5cmlnaHQgMjAxNlxuICogQGxpY2Vuc2UgR1BMLTMuMFxuICogQHNpbmNlIDAuMi4wXG4gKi9cblxuaW1wb3J0ICogYXMgcHVnIGZyb20gJ3B1Zyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnY2hhaSc7XG5pbXBvcnQge1RlbXBsYXRlfSBmcm9tICcuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9UZW1wbGF0ZSc7XG5pbXBvcnQge0lTaXRlTWVudU1hcH0gZnJvbSAnLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvTWVudSc7XG5cbmRlc2NyaWJlKCdUZW1wbGF0ZScsICgpID0+IHtcbiAgICBkZXNjcmliZSgnI3ByZXBhcmUoKScsICgpID0+IHtcbiAgICAgICAgaXQoJ2V4dHJhY3RzIElEcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUoKTtcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZVN0cmluZyA9ICctLSB1cmwoXFwnaGVsbG9cXCcpXFxuLS0gdXJsKFxcJ3dvcmxkXFwnKVxcbi0tIHVybCgpJztcbiAgICAgICAgICAgIHRlbXBsYXRlLnByZXBhcmUodGVtcGxhdGVTdHJpbmcsIHt9LCB7fSk7XG4gICAgICAgICAgICBhc3NlcnQuZGVlcEVxdWFsKHRlbXBsYXRlLmdldElkcygpLCBbJ2hlbGxvJywgJ3dvcmxkJ10pO1xuICAgICAgICB9KTtcbiAgICAgICAgaXQoJ2V4dHJhY3RzIGFzc2V0cyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUoKTtcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZVN0cmluZyA9ICctLSBhc3NldChcXCdzdHlsZS5jc3NcXCcpXFxuLS0gYXNzZXQoXFwnd29ybGQuanNcXCcpJztcbiAgICAgICAgICAgIHRlbXBsYXRlLnByZXBhcmUodGVtcGxhdGVTdHJpbmcsIHt9LCB7fSk7XG4gICAgICAgICAgICBhc3NlcnQuZGVlcEVxdWFsKHRlbXBsYXRlLmdldEFzc2V0cygpLCBbJ3N0eWxlLmNzcycsICd3b3JsZC5qcyddKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGl0KCdleHRyYWN0cyBtZW51cyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUoKTtcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZVN0cmluZyA9ICdlYWNoIHZhbHVlIGluIG1lbnVzLm1haW5cXG4gIHA9IHZhbHVlJztcbiAgICAgICAgICAgIHRlbXBsYXRlU3RyaW5nICs9ICdcXG5lYWNoIHZhbHVlIGluIG1lbnVzLnNlY29uZGFyeVxcbiAgcD0gdmFsdWUnO1xuICAgICAgICAgICAgbGV0IG1lbnVzT2JqZWN0OiBJU2l0ZU1lbnVNYXAgPSB7XG4gICAgICAgICAgICAgICAgbWFpbjogW10sXG4gICAgICAgICAgICAgICAgc2Vjb25kYXJ5OiBbXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0ZW1wbGF0ZS5wcmVwYXJlKHRlbXBsYXRlU3RyaW5nLCB7fSwgbWVudXNPYmplY3QpO1xuICAgICAgICAgICAgYXNzZXJ0LmRlZXBFcXVhbCh0ZW1wbGF0ZS5nZXRNZW51cygpLCBbJ21haW4nLCAnc2Vjb25kYXJ5J10pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBkZXNjcmliZSgnI2dlbmVyYXRlKCknLCAoKSA9PiB7XG4gICAgICAgIGl0KCd0aHJvd3MgYW4gZXJyb3IgaWYgbm90aGluZyB3YXMgcHJlcGFyZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBuZXcgVGVtcGxhdGUoKTtcbiAgICAgICAgICAgIGFzc2VydC50aHJvd3MoKCkgPT4gdGVtcGxhdGUuZ2VuZXJhdGUoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpdCgnZ2VuZXJhdGVzIEhUTUwgc3RyaW5nIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgbGV0IHRlbXBsYXRlU3RyaW5nID0gJ3AgSGVsbG8gV29ybGQhJztcbiAgICAgICAgICAgIHRlbXBsYXRlLnByZXBhcmUodGVtcGxhdGVTdHJpbmcsIHt9LCB7fSk7XG4gICAgICAgICAgICBhc3NlcnQuZXF1YWwodGVtcGxhdGUuZ2VuZXJhdGUoKSwgcHVnLnJlbmRlcih0ZW1wbGF0ZVN0cmluZykpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuIl19
